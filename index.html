<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Cultural Heritage VR Experience</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/webxr-polyfill@latest/build/webxr-polyfill.js"></script>
    <!-- Import Google Fonts for Odia support -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Oriya:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 20px;
            margin-bottom: 30px;
        }
        
        h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .heritage-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .heritage-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .heritage-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4);
        }
        
        .card-image {
            height: 200px;
            background-size: cover;
            background-position: center;
        }
        
        .card-content {
            padding: 20px;
        }
        
        .card-content h3 {
            margin-bottom: 10px;
            font-size: 1.5rem;
            color: #FFD700;
        }
        
        .card-content p {
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        .vr-button {
            display: block;
            width: 100%;
            padding: 12px;
            background: #FFD700;
            color: #1a2a6c;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s ease;
        }
        
        .vr-button:hover {
            background: #FFC400;
        }
        
        .vr-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 100;
            background: #000;
        }
        
        .close-vr {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 101;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .loading {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 1.5rem;
            z-index: 102;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            margin-top: 30px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 15px;
        }
        
        @media (max-width: 768px) {
            .heritage-grid {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="loading" id="loading"></div>
    
    <div class="container">
        <header>
            <h1>Indian Cultural Heritage VR Experience</h1>
            <p class="subtitle">Explore India's rich cultural heritage through immersive Virtual Reality</p>
        </header>
        
        <div class="heritage-grid">
            <div class="heritage-card" data-location="konark">
                <div class="card-image" style="background-image: url('https://assets.cntraveller.in/photos/65a4ca16f4f38543f111ce6d/16:9/w_5760,h_3240,c_limit/1444924249s')"></div>
                <div class="card-content">
                    <h3>Konark Sun Temple</h3>
                    <p>13th-century CE Sun Temple at Konark, Odisha, in the form of the God Surya's chariot with intricate stone carvings.</p>
                    <button class="vr-button">Experience in VR</button>
                </div>
            </div>
            
            <div class="heritage-card" data-location="jagannath">
                <div class="card-image" style="background-image: url('https://d1msew97rp2nin.cloudfront.net/prod/phool/blogimages/172017492135594.webp')"></div>
                <div class="card-content">
                    <h3>Jagannath Temple</h3>
                    <p>An important Hindu temple dedicated to Jagannath, a form of Vishnu, located in Puri, Odisha.</p>
                    <button class="vr-button">Experience in VR</button>
                </div>
            </div>
            
            <div class="heritage-card" data-location="lingaraj">
                <div class="card-image" style="background-image: url('https://www.easeindiatrip.com/blog/wp-content/uploads/2025/03/Odisha-Bhubaneswar-Lingaraj-Temple-03.jpg')"></div>
                <div class="card-content">
                    <h3>Lingaraj Temple</h3>
                    <p>One of the oldest temples in Bhubaneswar, dedicated to Harihara, a form of Shiva and Vishnu.</p>
                    <button class="vr-button">Experience in VR</button>
                </div>
            </div>

            
            <div class="heritage-card" data-location="udayagiri">
                <div class="card-image" style="background-image: url('https://i0.wp.com/compass.rauias.com/wp-content/uploads/2024/07/image-24.png')"></div>
                <div class="card-content">
                    <h3>Udayagiri Caves</h3>
                    <p>Rock-cut caves with historical and archaeological significance, featuring inscriptions and sculptures.</p>
                    <button class="vr-button">Experience in VR</button>
                </div>
            </div>
        </div>
        
        <footer>
            <p>This VR experience is compatible with Meta Quest 3 and other VR headsets</p>
            <p>Experience India's cultural heritage through immersive virtual reality</p>
        </footer>
    </div>
    
    <div class="vr-container" id="vr-container">
        <button class="close-vr" id="close-vr">✕</button>
        
        <!-- A-Frame VR Scene -->
        <a-scene 
            vr-mode-ui="enabled: true" 
            xr-mode-ui="enabled: true"
            renderer="colorManagement: true;"
            background="color: #000"
            loading-screen="dotsColor: #0080e5; backgroundColor: #000">
            
            <!-- Add font assets with CORRECT URL -->
            <a-assets>
                <a-asset-item id="notoOdiaFont" src="https://fonts.gstatic.com/s/notosansoriya/v30/AABC0ZN89u9vf7YBERfK-ZMq6oA3MKQ.woff2"></a-asset-item>
            </a-assets>
            
            <!-- Sky with 360 images for each location -->
            <a-sky id="main-sky" src="puri1.jpg" rotation="0 -90 0"></a-sky>
            
            <!-- Dual Language Info Panel - Always Visible -->
            <a-entity id="vr-info-panel" position="0 1 -2">
                
                <!-- ENGLISH Panel -->
                <a-entity id="english-panel" position="-1.3 0.8 0">
                    <!-- Background Panel -->
                    <a-plane position="0 0 0" 
                            width="2" 
                            height="1" 
                            color="#000000" 
                            opacity="0.9"
                            material="shader: flat">
                    </a-plane>
                    
                    <!-- English Label -->
                    <a-entity position="0 0.45 0.01" 
                             text="align: center; color: #FFD700; width: 1.8; value: ENGLISH">
                    </a-entity>
                    
                    <!-- Site Title (English) -->
                    <a-entity id="vr-site-title-en" 
                             position="0 0.2 0.01" 
                             text="align: center; color: #FFD700; width: 1.8; wrapCount: 25; value: Konark Sun Temple">
                    </a-entity>
                    
                    <!-- Site Description (English) -->
                    <a-entity id="vr-site-description-en" 
                             position="0 -0.2 0.01" 
                             text="align: center; color: white; width: 1.8; wrapCount: 30; 
                                   value: Built in the 13th century, this UNESCO World Heritage site is dedicated to the Sun God.">
                    </a-entity>
                </a-entity>
                
                <!-- ODIA Panel -->
                <a-entity id="odia-panel" position="1.3 0.8 0">
                    <!-- Background Panel -->
                    <a-plane position="0 0 0" 
                            width="2" 
                            height="1" 
                            color="#000000" 
                            opacity="0.9"
                            material="shader: flat">
                    </a-plane>
                    
                    <!-- Odia Label -->
                    <a-entity position="0 0.45 0.01" 
                             text="align: center; color: #FFD700; width: 1.8; value: ଓଡ଼ିଆ; font: https://fonts.gstatic.com/s/notosansoriya/v30/AABC0ZN89u9vf7YBERfK-ZMq6oA3MKQ.woff2">
                    </a-entity>
                    
                    <!-- Site Title (Odia) -->
                    <a-entity id="vr-site-title-odia" 
                             position="0 0.2 0.01" 
                             text="align: center; color: #FFD700; width: 1.8; wrapCount: 25; value: କୋଣାର୍କ ସୂର୍ଯ୍ୟ ମନ୍ଦିର; font: https://fonts.gstatic.com/s/notosansoriya/v30/AABC0ZN89u9vf7YBERfK-ZMq6oA3MKQ.woff2">
                    </a-entity>
                    
                    <!-- Site Description (Odia) -->
                    <a-entity id="vr-site-description-odia" 
                             position="0 -0.2 0.01" 
                             text="align: center; color: white; width: 1.8; wrapCount: 30; 
                                   value: ୧୩ଶ ଶତାବ୍ଦୀରେ ନିର୍ମିତ, ଏହି ୟୁନେସ୍କୋ ବିଶ୍ୱ ଐତିହ୍ୟ ସ୍ଥଳୀ ସୂର୍ଯ୍ୟ ଦେବତାଙ୍କୁ ସମର୍ପିତ।; font: https://fonts.gstatic.com/s/notosansoriya/v30/AABC0ZN89u9vf7YBERfK-ZMq6oA3MKQ.woff2">
                    </a-entity>
                </a-entity>
                
                <!-- Instructions (Below both panels) -->
                <a-entity id="vr-instructions" 
                         position="0 -0.8 0" 
                         text="align: center; color: #00FF00; width: 3; 
                               value: Pull TRIGGER to Next Site">
                </a-entity>
            </a-entity>

            <!-- Camera with VR controls -->
            <a-entity id="rig" position="0 0 0">
                <a-entity camera 
                         look-controls 
                         position="0 1.6 0"
                         wasd-controls="enabled: false"
                         xr-mode-ui="enabled: true">
                    
                    <!-- Laser pointer for Quest controllers -->
                    <a-entity laser-controls="hand: right" line="color: #0080e5; opacity: 0.5"></a-entity>
                    <a-entity laser-controls="hand: left" line="color: #0080e5; opacity: 0.5"></a-entity>
                    
                    <!-- Simple cursor -->
                    <a-entity cursor="fuse: false; rayOrigin: mouse"
                             position="0 0 -1"
                             geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
                             material="color: #0080e5; shader: flat">
                    </a-entity>
                </a-entity>
            </a-entity>
        </a-scene>
    </div>
    
    <script>
        // Initialize WebXR Polyfill
        if (navigator.xr === undefined) {
            new WebXRPolyfill();
        }

        const siteInfo = {
            konark: {
                title: "Konark Sun Temple",
                titleOdia: "କୋଣାର୍କ ସୂର୍ଯ୍ୟ ମନ୍ଦିର",
                description: "Built in the 13th century, this UNESCO World Heritage site is dedicated to the Sun God. The temple is designed as a gigantic chariot with elaborately carved stone wheels, pillars and walls.",
                descriptionOdia: "୧୩ଶ ଶତାବ୍ଦୀରେ ନିର୍ମିତ, ଏହି ୟୁନେସ୍କୋ ବିଶ୍ୱ ଐତିହ୍ୟ ସ୍ଥଳୀ ସୂର୍ଯ୍ୟ ଦେବତାଙ୍କୁ ସମର୍ପିତ। ମନ୍ଦିରଟି ଏକ ବିରାଟ ରଥ ଭାବରେ ନକ୍ଷା କରାଯାଇଛି ଯାହାର ପଥର ଚକ, ସ୍ତମ୍ଭ ଓ କାନ୍ଥଗୁଡିକ ଅତ୍ୟନ୍ତ କଳାତ୍ମକ ଭାବରେ ଖୋଦିତ।",
                image: "konark.jpg",
                hasNavigation: false
            },
            jagannath: {
                title: "Jagannath Temple, Puri",
                titleOdia: "ଜଗନ୍ନାଥ ମନ୍ଦିର, ପୁରୀ",
                description: "One of the Char Dham pilgrimage sites, this temple is famous for its annual Rath Yatra festival. The temple was built in the 12th century and is dedicated to Lord Jagannath, a form of Vishnu.",
                descriptionOdia: "ଚାରି ଧାମ ତୀର୍ଥସ୍ଥଳ ମଧ୍ୟରୁ ଏକ, ଏହି ମନ୍ଦିର ଏହାର ବାର୍ଷିକ ରଥଯାତ୍ରା ଉତ୍ସବ ପାଇଁ ପ୍ରସିଦ୍ଧ। ମନ୍ଦିରଟି ୧୨ଶ ଶତାବ୍ଦୀରେ ନିର୍ମିତ ହୋଇଥିଲା ଏବଂ ଏହା ଭଗବାନ ଜଗନ୍ନାଥଙ୍କୁ, ଯିଏ ବିଷ୍ଣୁଙ୍କର ଏକ ରୂପ, ସମର୍ପିତ।",
                image: "puri7.jpg",
                hasNavigation: true,
            },
            lingaraj: {
                title: "Lingaraj Temple, Bhubaneswar",
                titleOdia: "ଲିଙ୍ଗରାଜ ମନ୍ଦିର, ଭୁବନେଶ୍ୱର",
                description: "Dedicated to Lord Shiva, this 11th-century temple is a masterpiece of Kalinga architecture. The temple tower stands at 180 feet and is surrounded by numerous smaller shrines.",
                descriptionOdia: "ଭଗବାନ ଶିବଙ୍କୁ ସମର୍ପିତ, ଏହି ୧୧ଶ ଶତାବ୍ଦୀର ମନ୍ଦିରଟି କଳିଙ୍ଗ ସ୍ଥାପତ୍ୟର ଏକ ଉତ୍କୃଷ୍ଟ ନମୁନା। ମନ୍ଦିର ଶିଖରଟି ୧୮୦ ଫୁଟ ଉଚ୍ଚ ଏବଂ ଏହା ଅନେକ ଛୋଟ ଛୋଟ ମନ୍ଦିରଦ୍ୱାରା ଘେରା ହୋଇଛି।",
                image: "lingaraj.jpg",
                hasNavigation: false
            },
            udayagiri: {
                title: "Udayagiri and Khandagiri Caves",
                titleOdia: "ଉଦୟଗିରି ଓ ଖଣ୍ଡଗିରି ଗୁମ୍ଫା",
                description: "These rock-cut caves date back to the 2nd century BCE and were used as residential blocks for Jain monks. The caves feature intricate carvings and inscriptions detailing historical events.",
                descriptionOdia: "ଏହି ପଥର କଟା ଗୁମ୍ଫାଗୁଡିକ ଖ୍ରୀଷ୍ଟପୂର୍ବ ଦ୍ୱିତୀୟ ଶତାବ୍ଦୀର, ଯାହାକି ଜୈନ ସନ୍ନ୍ୟାସୀମାନଙ୍କ ନିବାସ ସ୍ଥଳୀ ଭାବରେ ବ୍ୟବହୃଏ ହେଉଥିଲା। ଗୁମ୍ଫାଗୁଡିକରେ ଅତ୍ୟନ୍ତ ସୁନ୍ଦର ଖୋଦାଇ କାମ ଏବଂ ଐତିହାସିକ ଘଟଣାବଳୀ ବର୍ଣ୍ଣନା କରୁଥିବା ଲିପି ରହିଛି।",
                image: "cave1.jpg",
                hasNavigation: false
            }
        };
        
        // DOM elements
        const vrContainer = document.getElementById('vr-container');
        const closeVr = document.getElementById('close-vr');
        const mainSky = document.getElementById('main-sky');
        const loading = document.getElementById('loading');
        
        let currentSite = 'konark';
        const siteOrder = ['konark', 'jagannath', 'lingaraj', 'udayagiri'];
        let canClick = true;
        
        // Add event listeners to all VR buttons
        document.querySelectorAll('.vr-button').forEach(button => {
            button.addEventListener('click', function() {
                const card = this.closest('.heritage-card');
                const location = card.getAttribute('data-location');
                enterVR(location);
            });
        });
        
        // Close VR experience
        closeVr.addEventListener('click', function() {
            vrContainer.style.display = 'none';
        });
        
        // Enhanced enterVR function
        function enterVR(site) {
            loading.style.display = 'block';
            
            setTimeout(() => {
                currentSite = site;
                vrContainer.style.display = 'block';
                // Wait for A-Frame to initialize
                setTimeout(() => {
                    initializeVRElements();
                    changeLocation(site);
                    loading.style.display = 'none';
                }, 100);
            }, 1000);
        }
        
        // Initialize VR elements after A-Frame loads
        function initializeVRElements() {
            const scene = document.querySelector('a-scene');
            
            // Listen for controller trigger events
            scene.addEventListener('triggerdown', function(event) {
                if (canClick) {
                    navigateToNextSite();
                    // Prevent rapid clicking
                    canClick = false;
                    setTimeout(() => {
                        canClick = true;
                    }, 1000); // 1 second cooldown
                }
            });
            
            // Also listen for mouse clicks (for desktop testing)
            scene.addEventListener('click', function(event) {
                if (canClick) {
                    navigateToNextSite();
                    canClick = false;
                    setTimeout(() => {
                        canClick = true;
                    }, 1000);
                }
            });
        }
        
        // Function to change location in VR
        function changeLocation(site) {
            // Update skybox
            mainSky.setAttribute('src', siteInfo[site].image);
            
            // Update information panel with current language
            updateSiteInfo();
        }
        
        // Function to update site information for BOTH languages
        function updateSiteInfo() {
            // Update English text
            const vrSiteTitleEn = document.querySelector('#vr-site-title-en');
            const vrSiteDescriptionEn = document.querySelector('#vr-site-description-en');
            
            // Update Odia text
            const vrSiteTitleOdia = document.querySelector('#vr-site-title-odia');
            const vrSiteDescriptionOdia = document.querySelector('#vr-site-description-odia');
            
            if (vrSiteTitleEn && vrSiteDescriptionEn && vrSiteTitleOdia && vrSiteDescriptionOdia) {
                // Update English
                vrSiteTitleEn.setAttribute('text', 'value', siteInfo[currentSite].title);
                vrSiteDescriptionEn.setAttribute('text', 'value', siteInfo[currentSite].description);
                
                // Update Odia
                vrSiteTitleOdia.setAttribute('text', 'value', siteInfo[currentSite].titleOdia);
                vrSiteDescriptionOdia.setAttribute('text', 'value', siteInfo[currentSite].descriptionOdia);
            }
        }
        
        // Navigation function - ANY trigger pull goes to next site
        function navigateToNextSite() {
            const currentIndex = siteOrder.indexOf(currentSite);
            const nextIndex = (currentIndex + 1) % siteOrder.length;
            currentSite = siteOrder[nextIndex];
            changeLocation(currentSite);
            
            // Add visual feedback
            const instructions = document.querySelector('#vr-instructions');
            if (instructions) {
                const originalColor = instructions.getAttribute('text').color;
                instructions.setAttribute('text', 'color', '#FF0000');
                setTimeout(() => {
                    instructions.setAttribute('text', 'color', '#00FF00');
                }, 200);
            }
        }
        
        // Add keyboard navigation (spacebar to next site)
        document.addEventListener('keydown', function(event) {
            if (vrContainer.style.display === 'block') {
                if (event.key === ' ' || event.key === 'Spacebar') {
                    navigateToNextSite();
                } else if (event.key === 'Escape') {
                    vrContainer.style.display = 'none';
                }
            }
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Initial setup will happen when VR is entered
        });
    </script>
</body>
</html>
